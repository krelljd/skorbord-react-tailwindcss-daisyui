/* Modern DaisyUI-first CSS for Skorbord Card App */

@import "tailwindcss";

/* Base layer - fundamental mobile-first setup */
@layer base {
  html {
    background-color: hsl(var(--b1));
    color: hsl(var(--bc));
  }

  body {
    /* Touch optimization for mobile */
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
    
    /* iOS Safari optimizations */
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    
    /* Safe area handling for notched devices */
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    margin: 0;
  }

  /* Allow text selection for inputs and content areas */
  input, textarea, [contenteditable], .selectable {
    -webkit-user-select: text;
    user-select: text;
  }
}

/* Component layer - modern reusable styles */
@layer components {
  /* Mobile container with modern responsive design */
  .mobile-container-modern {
    max-width: 32rem;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1rem;
    padding-right: 1rem;
    padding-top: 0.75rem;
    padding-bottom: 0.75rem;
    min-height: 100vh;
    min-height: 100dvh;
    display: flex;
    flex-direction: column;
  }

  /* Modern touch-friendly buttons */
  .btn-touch-modern {
    min-height: 44px;
    min-width: 44px;
    touch-action: none;
    transition: all 0.2s ease-in-out;
  }

  /* Score buttons with modern styling */
  .score-btn-modern {
    min-height: 44px;
    min-width: 44px;
    touch-action: none;
    font-size: 1.25rem;
    font-weight: 700;
    border-radius: 0.75rem;
    transition: all 0.2s ease-in-out;
  }

  /* Modern player card using semantic colors */
  .player-card-modern {
    padding: 0.75rem;
    margin: 0.25rem;
    border-radius: 0.75rem;
    border: 1px solid hsl(var(--b3));
    background-color: hsl(var(--b2));
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease-in-out;
  }

  /* Score display with modern typography */
  .score-display-modern {
    font-size: 2.25rem;
    font-weight: 700;
    text-align: center;
    margin-bottom: 0.5rem;
    color: hsl(var(--bc));
  }

  /* Modern player reorder animations */
  .player-reorder-highlight {
    border: 3px solid hsl(var(--p)) !important;
    border-radius: 0.75rem !important;
    box-shadow: 
      0 20px 25px -5px hsl(var(--p) / 0.1),
      0 10px 10px -5px hsl(var(--p) / 0.04),
      0 0 0 1px hsl(var(--p) / 0.05),
      0 0 0 3px hsl(var(--p) / 0.4) !important;
    background: linear-gradient(135deg, 
      hsl(var(--p) / 0.08), 
      hsl(var(--s) / 0.05)) !important;
    transition: all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;
    transform: scale(1.03) !important;
    z-index: 50 !important;
    outline: 2px solid hsl(var(--p) / 0.6) !important;
    outline-offset: 2px !important;
    filter: brightness(1.2) !important;
  }
  
  .player-reorder-status {
    position: relative;
  }
  
  .player-reorder-status::before {
    content: '';
    position: absolute;
    inset: -0.375rem;
    background: linear-gradient(45deg, 
      hsl(var(--p) / 0.3), 
      hsl(var(--s) / 0.3),
      hsl(var(--a) / 0.2));
    border-radius: 0.75rem;
    opacity: 0.8;
    filter: blur(6px);
    animation: daisyPulse 2s ease-in-out infinite;
    z-index: -1;
  }
  
  .player-reorder-status::after {
    content: '';
    position: absolute;
    top: -0.5rem;
    right: -0.5rem;
    width: 1rem;
    height: 1rem;
    background: radial-gradient(circle, hsl(var(--su)), hsl(var(--p)));
    border: 2px solid hsl(var(--b1));
    border-radius: 50%;
    animation: daisyPulse 1.5s ease-in-out infinite;
    box-shadow: 0 0 10px hsl(var(--p) / 0.5);
  }
  
  @keyframes daisyPulse {
    0%, 100% {
      transform: scale(1);
      opacity: 0.8;
    }
    50% {
      transform: scale(1.05);
      opacity: 1;
    }
  }

  /* Connection status modern styling */
  .connection-indicator-modern {
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.25rem 0.5rem;
    border-radius: 0.375rem;
    font-size: 0.75rem;
    font-weight: 600;
  }
}

/* Utilities layer - modern utility classes */
@layer utilities {
  /* Touch action utilities */
  .touch-none { touch-action: none; }
  .touch-pan-x { touch-action: pan-x; }
  .touch-pan-y { touch-action: pan-y; }
  
  /* Modern score tally animation */
  .score-tally-modern {
    position: absolute;
    top: 0;
    right: 0;
    padding: 0.25rem 0.5rem;
    border-radius: 0.5rem;
    font-size: 0.875rem;
    font-weight: 700;
    background-color: hsl(var(--a));
    color: hsl(var(--ac));
    animation: scoreTallyFadeInOut 3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
  }

  /* Score tally animation keyframes - updated for inline display */
  @keyframes scoreTallyFadeInOut {
    0% { 
      opacity: 0; 
      transform: translateX(-12px) scale(0.8);
    }
    10% { 
      opacity: 1; 
      transform: translateX(0) scale(1.1);
    }
    15% { 
      opacity: 1; 
      transform: translateX(0) scale(1);
    }
    85% { 
      opacity: 1; 
      transform: translateX(0) scale(1);
    }
    100% { 
      opacity: 0; 
      transform: translateX(-8px) scale(0.9);
    }
  }

  /* Slide animations for mobile views */
  .slide-in-bottom {
    animation: slideInBottom 0.3s ease-out;
  }
  
  @keyframes slideInBottom {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Long press visual feedback */
  .long-press-active {
    animation: longPressGlow 3000ms ease-in-out forwards;
  }

  @keyframes longPressGlow {
    0% { 
      box-shadow: 0 0 0 0 hsl(var(--p) / 0.2);
      background-color: hsl(var(--b2) / 0.5);
    }
    50% { 
      box-shadow: 0 0 0 4px hsl(var(--p) / 0.1);
      background-color: hsl(var(--b2) / 0.7);
    }
    100% { 
      box-shadow: 0 0 0 6px hsl(var(--p) / 0.05);
      background-color: hsl(var(--b2) / 0.8);
    }
  }

  /* iOS Safari specific optimizations */
  @supports (-webkit-touch-callout: none) {
    [data-draggable="true"] {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
    }
    
    /* Optimize for iPhone notch and home indicator */
    .mobile-container-modern {
      padding-top: max(0.75rem, env(safe-area-inset-top));
      padding-bottom: max(0.75rem, env(safe-area-inset-bottom));
    }
    
    /* Compact spacing for smaller screens */
    @media (max-height: 700px) {
      .mobile-container-modern {
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
      }
      
      .player-card-modern {
        padding: 0.5rem;
        margin: 0.125rem;
      }
    }

    /* Hardware acceleration for smooth animations */
    .player-cards-container,
    .player-card-container,
    .btn-touch-modern,
    .score-btn-modern {
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }
    
    /* Enhanced button touch handling */
    button {
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      touch-action: manipulation;
      -webkit-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
      -webkit-user-select: none;
      user-select: none;
    }
  }
}
